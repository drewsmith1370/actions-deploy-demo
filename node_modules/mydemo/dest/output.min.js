var account=account||{};account.dao={reqAccountBalance:function(a,b){triones.request.get(BEIDOU_ROOT+"account/getAccountBalance.action",a,b)},reqOverviewData:function(a,b){triones.request.get(BEIDOU_ROOT+"account/getAccountSummary.action",a,b)},reqAotList:function(a,b,c){triones.request.get(BEIDOU_ROOT+"aot/getAotItemAll.action",a,b,c)},reqAotNoHint:function(a,b,c){triones.request.post(BEIDOU_ROOT+"aot/deleteObj.action",a,b,c)},reqResetAot:function(a,b,c){triones.request.post(BEIDOU_ROOT+"aot/resetAllObj.action",a,b,c)},reqAccountTrade:function(a,b,c){triones.request.get(BEIDOU_ROOT+"cprounit/icon/getAllTradeInfoAndPurpose.action",a,b,c)},queryUserInfoRemind:function(a,b,c){triones.request.get(BEIDOU_ROOT+"manager/main/queryUserInfoRemind.action",a,b,c)},readRemindMessage:function(a,b,c){triones.request.get(BEIDOU_ROOT+"manager/main/readRemindMessage.action",a,b,c)},getMsgList:function(a,b,c){triones.request.get(BEIDOU_ROOT+"message/getMessageList.action",a,b,c)},getMsgSetting:function(a,b,c){triones.request.get(BEIDOU_ROOT+"message/getMessageCustom.action",a,b,c)},saveMsgSetting:function(a,b,c){triones.request.get(BEIDOU_ROOT+"message/modMsgCustom.action",a,b,c)},readMsg:function(a,b,c){triones.request.get(BEIDOU_ROOT+"message/setMsgRead.action",a,b,c)},getTaxData:function(a,b,c){triones.request.get(REPORT_ROOT+"report/getTodayTaxStat.action",a,b,c)}};var FIELDS_KT={tagName:{field:"tagName",title:"行业词包",content:function(a,b){var c=a.tagName;c&&baidu.string.getByteLength(c)>=21&&(c=baidu.string.subByte(c,17),c+="...");var d=a.selected?"disabled":"name",e='<span id="tradePackageTitle'+b+'" class="trade-package-title trade-package-package-'+d+'"title="'+a.tagName+'">'+c+"</span>("+a.wordNum+")";return e},sortable:1,minWidth:160},tagDesc:{field:"tagDesc",title:"关键词",content:function(a){var b=a.tagDesc||"";return baidu.string.getByteLength(b)>51&&(b=baidu.string.subByte(b,47)),'<span style="color:#999" title=" '+a.tagDesc+' ">'+b+"...</span>"},width:250,minWidth:250},relation:{field:"relation",title:function(){var a=triones.util.tip("词包与搜索词的相关程度","相关程度按“高”、“中”、“低”依次递减。");return"相关性"+a},content:function(a){var b="-";switch(a.relation){case 0:case 1:case-1:b="高";break;case-2:case-3:b="中";break;case-4:case-5:b="低";break;default:b="-"}return b},sortable:1,width:50,minWidth:55},hot:{field:"hot",title:function(){var a=triones.util.tip("搜索引擎的搜索量","最近7天网民对该词包内词的搜索热度。信号越强，热度越高。");return"热度"+a},content:function(a){var b=a.hot,c='<div class="trade-package-table-icon trade-package-table-icon-popularity trade-package-table-icon-popularity-';return c+=1==b?"low":2==b?"medium":3==b?"high":"low",c+='"></div>'},sortable:1,width:45,minWidth:45},pv:{field:"pv",title:function(){var a=triones.util.tip("日均展现量","最近一周词包里的词在网盟的日均展现次数之和。");return"日均展现量"+a},content:function(a){var b=a.pv;switch(b){case 5:str="<5";break;case 20001:str=">20000";break;default:str=b}return str},sortable:1,minWidth:45},competition:{field:"competition",title:function(){var a=triones.util.tip("竞争激烈程度","蓝色条形图越长，添加该词包内词的网盟客户就越多。");return"竞争度"+a},content:function(a){var b=7,c=a.competition,d='<div class="boxbr"><div class="boxcn" style="font-size:0px;overflow:hidden;width:',e=c*b+"px";return d+=e+'"></div></div>'},sortable:1,minWidth:75},options:{field:"options",content:function(a,b){var c='<div id="tradePackageAddSingleBtn'+b+'" class="trade-package-table-icon hide trade-package-add-single-btn" title="添加词包" ></div>';return c},sortable:0,minWidth:40},kw:{title:"关键词",align:"left",sortable:!0,field:"kw",minWidth:100,width:180,content:function(a,b){var c=[],d="";return c.push('<div  id="kwCusWrap_'+b+'" class="'+d+'">'),c.push('<div class="kw-wrap">'),c.push('<div class="kw-text"  title="'+a.kw+'">'+a.kw+"</div>"),c.push("</div>"),c.push('<div id="PX'+b+'" class="px"></div>'),c.push("</div>"),c.join("")}},uv:{title:"覆盖人数",align:"right",sortable:!0,field:"uv",width:100,minWidth:80,content:function(a){return-1==a.uv?"--":ktRecycleTableConfig.fieldHelper.avgSearchCount(a.uv)}},awgdscnt:{title:function(){return"日均展现量"+triones.util.tip("日均展现量","最近一周关键词在网盟的日均展现次数。一般来说，推广地域越广，关键词的日均展现量越大。")},align:"right",sortable:!0,field:"awgdscnt",width:120,minWidth:70,content:function(a){return-1==a.awgdscnt?"--":ktRecycleTableConfig.fieldHelper.avgDisplayCount(a.awgdscnt)}},compdg:{title:function(){return"竞争激烈度"+triones.util.tip("竞争激烈程度","蓝色条形图越长，添加该词的网盟客户就越多。")},align:"left",sortable:!0,field:"compdg",width:120,minWidth:85,stable:1,content:function(a){return ktRecycleTableConfig.fieldHelper.compitionDegree(a.compdg)}},word:{field:"word",title:"关键词",content:function(a,b){var c=[],d="";return a.recycled?d="kw-cus-recycled":a.selected&&(d="kw-cus-clicked"),c.push('<div  id="wordWrap'+b+'" class="'+d+'">'),c.push('<div class="kw-wrap">'),c.push('<div class="kw-text" title="'+a.word+'">'+a.word+"</div>"),c.push("</div>"),c.push('<div id="deleteSingleWord'+b+'" class="recycle-bin"title="移除至回收站，不要再出现该关键词"></div>'),c.push('<div id="addSingleWord'+b+'" class="pr"></div>'),c.push("</div>"),c.join("")},sortable:1,minWidth:200,width:220},hot2:{field:"hot",title:function(){var a=triones.util.tip("搜索引擎的搜索量","最近7天网民对该关键词的搜索热度。信号越强，热度越高。");return"热度"+a},content:function(a){var b=a.hot,c='<div class="trade-package-table-icon trade-package-table-icon-popularity trade-package-table-icon-popularity-';return c+=1==b?"low":2==b?"medium":3==b?"high":"low",c+='"></div>'},minWidth:50,width:50,sortable:1},pv2:{field:"pv",title:function(){var a=triones.util.tip("日均展现量","最近一周关键词在网盟的日均展现次数。");return"日均展现量"+a},content:function(a){var b=a.pv;switch(b){case 5:str="<5";break;case 20001:str=">20000";break;default:str=b}return str},sortable:1,minWidth:70,width:70},competition2:{field:"competition",title:function(){var a=triones.util.tip("竞争激烈程度","蓝色条形图越长，添加该词的网盟客户就越多。");return"竞争度"+a},content:function(a){var b=7,c=a.competition,d='<div class="boxbr"><div class="boxcn" style="font-size:0px;overflow:hidden;width:',e=c*b+"px";return d+=e+'"></div></div>'},sortable:1,minWidth:80,width:80}};define("addkeyword/filterutil",function(){return{includeWords:function(a,b,c){for(var d,e=[],f=0;f<a.length;f++){d=a[f];for(var g=!1,h=0;h<b.length;h++){var i=b[h],j=String(d[c+""]);if((j||"0"==j)&&-1!=j.indexOf(i)){g=!0;break}}g&&e.push(d)}return e},excludeWords:function(a,b,c){for(var d,e=[],f=0;f<a.length;f++){d=a[f];for(var g=!0,h=0;h<b.length;h++)if(""!=b[h]){var i=b[h],j=String(d[c+""]);if((j||"0"==j)&&-1!=j.indexOf(i)){g=!1;break}}g&&e.push(d)}return e},filterSource:function(a){var b,c=this,d=params||c._filterParam,e=0,f=a.length,g=[];for(e=0;f>e;e++)if(b=a[e],!d.typeFilter||b.reasonId+""==d.typeFilter){if(d.kwRoot){if(b.kwRoot!=d.kwRoot)continue}else if(d.include&&-1==b.kw.indexOf(d.include))continue;d.exclude&&-1!=b.kw.indexOf(d.exclude)||g.push(b)}return g}}}),define("addkeyword/group",function(){return window.GroupSelectMaker={planData:[],inited:!1,init:function(){GroupSelectMaker.getPlanListData(),inited=!0},getPlanListData:function(){var a=GroupSelectMaker;require(["addkeyword/dao"],function(b){b.getPlanList("",function(b,c){c&&2==c.status||(a.planData=b.list),a.createGroup()},function(){a.createGroup()})})},createGroup:function(){var a=GroupSelectMaker;a.selector=ui.util.create("DoubleSelectionPanel",{datasource:GroupSelectMaker.planData,leftNameKey:"name",leftValueKey:"value",rightNameKey:"name",rightValueKey:"value",maxTextLength:16,leftNoDataHtml:"请先新建推广计划",rightNoDataHtml:"请先选择推广计划",filterMapLeft:xreportConfig.PLAN_STATE,filterMapRight:xreportConfig.GROUP_STATE,filterKey:"state",filterSelectSourceLeft:xreportConfig.PLAN_STATE_FILTER,filterSelectSourceRight:xreportConfig.GROUP_STATE_FILTER,id:"multiGroupSelector"},baidu.g("krGroupDIVInner")),a.selector.onleftfromchange=a.onMultiSelectPlan(),a.selector.onvaluechange=a.onMultiSelectGroup()},onMultiSelectGroup:function(){return function(){var a=GroupSelectMaker.getValue();Eventer.dispatchEvent("ON_GROUP_CHANGE",a)}},onMultiSelectPlan:function(){return function(a,b,c){var d=[],e={planId:a};group.dao.getKtGroup(baidu.url.jsonToQuery(e),function(a,b){b&&2==b.status||(d=a.list),c(d)},function(){c(d)})}},getValue:function(){for(var a=this.selector.getValue(),b=[],c={},d=0;d<a.length;d++)b.push(a[d].value),c[a[d].planId]=1;this.bufferPlanIds=[];for(var e in c)this.bufferPlanIds.push(e);return b}},"check window.GroupSelectMaker before you use it"}),define("addkeyword/importkt",function(){return new er.Action({VIEW:"importkt",winBody:null,UI_PROP_MAP:{selectPlan:{datasource:"*planData",disabled:0,encodeHtml:1,emptyText:"选择推广计划",width:130,value:""},selectUnit:{datasource:[{value:"",name:"选择推广单元"}],emptyText:"选择推广单元",disabled:1,encodeHtml:1,width:130}},CONTEXT_INITER_MAP:{init:function(a){a()}},onafterrender:function(){var a=this;ui.get("selectPlan").onchange=a.onPlanChange(),ui.get("radioImportOne").onclick=function(){baidu.show("blockGroup"),baidu.hide("hintImportKt")},ui.get("radioImportAll").onclick=function(){baidu.hide("blockGroup"),baidu.hide("hintImportKt")},a.winBody=a.arg.winBody,a.initPlan()},initPlan:function(){var a=[{value:"",name:"选择推广计划"}],b=ui.get("selectPlan");group.dao.reqFcPlanList("",function(c){c.listData&&c.listData.length?c.listData.unshift(a[0]):c.listData=a,b.setDataSource(c.listData),b.value="",b.render(),b.disable(!1)})},onPlanChange:function(){return function(a){var b=ui.get("selectUnit");if(""==a)return void ui.get("selectUnit").disable(1);ui.get("selectUnit").disable(0);var c=[{value:"",name:"全部推广单元"}],d=a;""==d?(b.setDataSource([]),b.render()):group.dao.reqFcGroupList("fcPlanId="+d,function(a){b.setDataSource(c.concat(a[d]||[])),b.value="",b.render(),b.disable(!1)})}},valid:function(){var a=ui.get("radioImportAll").getChecked();return a||ui.get("selectPlan").getValue()?!0:(baidu.show("hintImportKt"),baidu.g("hintImportKt").innerHTML="请先选择推广组",!1)},recordImport:function(){var a="指定推广计划导入",b="AddKeyWordImportRecord";ui.get("radioImportAll").getChecked()&&(a="导入全部关键词",b="AddKeyWordImportAllRecord"),triones.monitor.record("id="+b+"&type=button&text="+a)},onConfirm:function(){var a=this;if(a.valid()){a.recordImport();var b=a.getKTS();a.reqKTS(b.fcPlanId,b.fcUnitId)}},getKTS:function(){var a=ui.get("radioImportAll").getChecked(),b=a?"":ui.get("selectPlan").getValue()||"0",c=a?"":ui.get("selectUnit").getValue()||"0";return{fcPlanId:b,fcUnitId:c}},reqKTS:function(a,b){triones.loading.show({level:5,text:"正在导入，请稍候..."}),a=ui.get("selectPlan").getValue()||"0",b=ui.get("selectUnit").getValue()||"0";var c=this;group.dao.reqFcKeyWord("fcPlanId="+a+"&fcUnitId="+b,function(a){triones.loading.hide({level:5}),1==a.state?ui.Dialog.alert({title:"提示信息",level:"5",zIndex:1e3,content:"您添加的关键词过多，已添加关键词不能超过"+c.mixWordsNum+"个"}):(a.listData.length?(Eventer.dispatchEvent("IMPORT_KR_SUCCESS",a.listData),ui.Dialog.alert({title:"提示信息",content:"已从搜索推广导入"+a.listData.length+"个关键词。",level:"2",zIndex:1e3,onok:function(){}})):ui.Dialog.alert({title:"提示信息",level:"2",zIndex:1e3,content:"无关键词可供导入"}),c.winBody.hide())})},onentercomplete:function(){}})}),define("addKeyword/main",["addkeyword/wordline","addkeyword/region"],function(a,b){var c=!1,d=!1;return new er.Action({VIEW:"addkeyword-lxj",regionController:null,showingType:"word",suggestSidHash:{},UI_PROP_MAP:{amArea:{value:REGION},textLine:{value:"",width:500,height:300,rule:"ipfilter"},krSearchInput:{placeholder:"*placeholder"},groupSelector:{datasource:[],rightNameKey:"name",rightValueKey:"value",maxTextLength:16,leftNoDataHtml:"请先新建推广计划",rightNoDataHtml:"请先选择推广计划",filterMapLeft:xreportConfig.PLAN_STATE,filterMapRight:xreportConfig.GROUP_STATE,filterKey:"state",filterSelectSourceLeft:xreportConfig.PLAN_STATE_FILTER,filterSelectSourceRight:xreportConfig.GROUP_STATE_FILTER,id:"multiGroupSelector"},krRegionTip:{title:"查询地域",content:"您可以针对特定地域获取关键词推荐，不影响您的实际推广地域设置。"}},onbeforeinitcontext:function(){if(this.arg.queryMap||(this.arg.queryMap={}),this.isTmp=this.arg.queryMap.isTmp||0,this.downloadGid=this.arg.queryMap.downloadGid,this.groupId=this.arg.queryMap.gid||this.arg.queryMap.groupId||0,this.groupId)this.groupIds=[this.groupId];else{this.groupIds=this.arg.queryMap.groupIds||[];var a=[];if(this.groupIds.length>0)for(var b,c=0;c<this.groupIds.length;c++)b=this.groupIds[c].split("=")[1],a.push(b);this.groupIds=a}this.toGetRegion=this.arg.queryMap.toGetRegion||!1,this.flag=this.arg.queryMap.flag||0,this.isAllRegion=this.isAllRegion||1,this.selectData=this.arg.queryMap.selectedData,this.targetType=this.arg.queryMap.targetType,this.isSmartGroup=this.arg.queryMap.isSmartGroup},CONTEXT_INITER_MAP:{init:function(a){this.setContext("selectedData",this.selectedData);var b=triones.util.hasTradeWordAuthority();this.setContext("hasTradePackage",b),triones.env.set("hasTradePackage",b),b?this.setContext("placeholder","请输入一个、多个关键词(空格分隔)或推广网站URL"):this.setContext("placeholder","请输入关键词或推广网站URL"),a()},KtTbList:function(a){var b=this,c=b.flag,d=[];d.push("isTmp="+this.isTmp),d.push("krFlag="+c),this.groupId&&(d.push("groupId="+this.groupId),this.setContext("groupId",this.groupId)),2==c&&d.push(triones.util.jsonToQuery({groupIds:this.groupIds})),(0==c||2==c)&&b.setContext("hasActiveRecom",0),this.setContext("extraParamWordList",d),this.setContext("fetchKwListAction","reqRecmdGroupKtData"),a()},ktTradePackage:function(a){var b=this,c=b.flag,d=[];d.push("isTmp="+this.isTmp),d.push("krFlag="+c),this.groupId&&d.push("groupIds="+this.groupId),2==c&&d.push(this.groupIds.join("&")),this.setContext("extraParamForTradePackage",d),a()}},onImportKt:function(){var a=this;require(["addkeyword/importkt"],function(b){triones.dlg.show("import-kt",{onShow:function(c){a.importCTRL=er.controller.loadSub(c.getBody(),b,{queryMap:a.arg.queryMap,winBody:c})},onConfirm:function(){a.importCTRL.onConfirm()},onCancel:function(){a.importCTRL&&er.controller.unloadSub(a.importCTRL),a.importCTRL=null}})})},onShowRecycle:function(){var a=this;require(["addkeyword/recycle"],function(b){triones.dlg.show("keyword-recycle",{onShow:function(c){a.recycleCtrl=er.controller.loadSub(c.getBody(),b,{queryMap:a.arg.queryMap,queryParams:a.getRecycleParams(),winBody:c})},onConfirm:function(a){a.hide()},onCancel:function(){a.recycleCtrl&&er.controller.unloadSub(a.recycleCtrl)}})})},_getRecomQueryHandler:function(){var a=this;return function(b,c,d){var e=a.suggestSidHash[c]||0;b=b||ui.get("krSearchInput").getValue(),b=b.replace(/^\{*|\}*$/g,"");var f={seedWord:b,suggestSid:d?e:0};Eventer.dispatchEvent("ON_KEYWORD_CHANGE",f)}},_getRecomInputSuggestHandler:function(){var a=this;return function(b){var c=a.groupIds;a.groupIds.length>1&&(c=0);var d=this,e={queryKw:b,groupId:c};group.dao.getSuggestkrWord(baidu.url.jsonToQuery(e),function(c,e){e&&2==e.status||(d.receiveData(b,c.list),a.suggestSidHash[b]=c.suggestSid)})}},onGroupBtnClick:function(){var a=this;a.gp||require(["addkeyword/group"],function(){GroupSelectMaker.init(),a.gp=1})},_resizeRightHeight:function(){var a=ui.get("textLine");if(a&&a.setHeight){var b=baidu.page.getViewHeight(),e=300;c&&(e=334),d&&(e=363),a.setHeight(b-e),baidu.g("wordResultList").style.height=b-e+"px",baidu.g("wordResultListLeft").style.minHeight=b-e+"px",baidu.g("wordResultListRight").style.minHeight=b-e+"px"}},onKrResize:function(){var a=this;return function(){a.resizeId&&clearTimeout(a.resizeId),a.resizeId=setTimeout(function(){a._resizeRightHeight()},300)}},onafterrender:function(){var c=this;baidu.dom.addClass(baidu.g("ctrlpanelfullDlgPrefixbody"),"kr-wraper"),a.init(),b.init(),c.setUiIndex(),c.getContext("hasTradePackage")?c.requirePackage():(baidu.hide("krTabs"),baidu.addClass("wordTab","active"),baidu.removeClass("packageTab","active"),c.requireRecomWord()),ui.get("krSearchInput").ongetdata=c._getRecomInputSuggestHandler(),ui.get("krSearchBtn").onclick=ui.get("krSearchInput").onenter=c._getRecomQueryHandler(),baidu.event.on("btnImportKt","click",function(){c.onImportKt()}),baidu.on(window,"resize",c.onKrResize()),baidu.event.on(document,"click",c.onDocumentClick()),baidu.on("btnRecycle","click",function(){c.onShowRecycle()}),ui.get("textLine").onchange=c.onTextLineChange(),ui.get("mainConfirmBtn").onclick=c.onSave(),ui.get("downloadKWBtn").onclick=c.onDownloadWords(),ui.get("downloadKWBtn").setState("disabled");var d=ui.get("krSearchInputRight");switch(d.onsearch=c.onSearchHandler(),ui.get("krSearchInputClear").onclick=c.onClearSearchWord(),ui.get("krSearchInputDel").onclick=c.onDeleteSearchResult(),c.arg.queryMap.from){case"batch":baidu.g("selectGroupBtnText").innerHTML="共选择"+c.arg.queryMap.groupIds.length+"个推广组";break;case"create":case"singleModify":case"singleAdd":baidu.g("selectGroupBtnText").innerHTML="当前推广组";break;default:baidu.dom.removeClass(baidu.g("selectGroupBtn"),"kr-groupselect-btn-disabled"),baidu.g("selectGroupBtn").onclick=function(a){baidu.event.stopPropagation(a||window.event),"none"==baidu.g("krGroupDIV").style.display?(baidu.show("krGroupDIV"),c.onGroupBtnClick(),baidu.g("krArrowIcon").style.backgroundPosition="0 -120px"):c._hideGroupSelect()}}window.havedWords=[],c.arg.queryMap.words&&(window.havedWords=c.arg.queryMap.words),"singleAdd"==c.arg.queryMap.from?c.loadSingleGroupKR():triones.ktutil.setKrWordsNum(0),baidu.g("packageTab").onclick=function(){baidu.dom.hasClass(this,"active")||(baidu.addClass(this,"active"),baidu.removeClass("wordTab","active"),c.requirePackage())},baidu.g("wordTab").onclick=function(){(!baidu.dom.hasClass(this,"active")||this.enforce)&&(this.enforce=!1,baidu.addClass(this,"active"),baidu.removeClass("packageTab","active"),c.requireRecomWord())},baidu.g("wordResultList").onclick=c.onDeleteOneWordHandler();var e=baidu.page.getViewHeight();ui.get("textLine").setHeight(e-300),c.addEvent(),c._initRecycle()},_initRecycle:function(){triones.tableDataService.clear();var a=this,b=a.getRecycleParams();b&&group.dao.getKrRecycleWord(b,function(b,c){triones.util.isError(c)||(window.recycledatasource=b.list,a._setRecycleCount())})},_setRecycleCount:function(){baidu.g("krRecycleCount").innerHTML=window.recycledatasource.length},onDocumentClick:function(){var a=this;return function(){a._hideGroupSelect()}},_hideGroupSelect:function(){if(baidu.g("krGroupDIV")&&"none"!=baidu.g("krGroupDIV").style.display){var a=this,b=GroupSelectMaker.getValue();baidu.hide("krGroupDIV"),baidu.g("krArrowIcon").style.backgroundPosition="0 -126px",b.length?(a.groupIds=b,baidu.g("selectGroupBtnText").innerHTML="共选择"+b.length+"个推广组"):baidu.g("selectGroupBtnText").innerHTML="请选择推广组"}},resetGroupPosi:function(){},loadSingleGroupKR:function(){var a="isFetchWords=true&groupId="+this.arg.queryMap.groupId;group.dao.reqGroupKtData(a,function(a){var b=a.ktWords||[];window.havedWords=b,triones.ktutil.setKrWordsNum(0)})},onTextLineChange:function(){var a=this;return function(){var b=ui.get("textLine").getValueItems();triones.ktutil.setKrWordsNum(b.length),triones.ktutil.showKrWordsOverMax(b.length),Eventer.dispatchEvent("TEXT_LINE_CHANGED",b),triones.ktutil.setDownBtnState(b),0==b.length&&a._toggleSearchInput(!1,"krSearchPanel")}},onDeleteOneWordHandler:function(){var a=this;return function(b){b=b||window.event;var c=b.target||b.srcElement;if("close"==c.className){var d=c.getAttribute("value");baidu.dom.remove(c.parentNode);for(var e=ui.get("textLine"),f=e.getValueItems(),g=0;g<f.length;g++)f[g]==d&&(f.splice(g,1),g--);e.setValue(""),e.addLines(f),e.onchange();var h=baidu.q("close",this).length||0;triones.ktutil.setKrWordsNum(f.length),baidu.g("krSearchInputNum").innerHTML=h;var i=document.createElement("div");i.innerHTML=a._getLeftHtml(h),baidu.g("wordResultListLeft").innerHTML=i.getElementsByTagName("div")[0].innerHTML}}},onDeleteSearchResult:function(){var a=this;return function(){for(var b=ui.get("textLine"),c=ui.get("krSearchInputRight").getValue(),d=b.getValueItems(),e=0;e<d.length;e++)d[e].indexOf(c)>-1&&(d.splice(e,1),e--);0==d.length?a._toggleSearchInput(!1,"krSearchPanel"):a._toggleSearchInput(!1,"krSearchNum"),b.setValue(""),b.addLines(d),triones.ktutil.setKrWordsNum(d.length),b.onchange()}},onSearchHandler:function(){var a=this;return function(b){""===b?a._toggleSearchInput(!1,"krSearchNum"):(a._searchWords(b),a._toggleSearchInput(!0,"krSearchNum"))}},onClearSearchWord:function(){var a=this;return function(){a._toggleSearchInput(!1,"krSearchNum")}},_searchWords:function(a){for(var b=ui.get("textLine"),c=b.getValueItems(),e=[],f=0,g=c.length;g>f;f++)c[f].indexOf(a)>-1&&e.push(c[f]);baidu.g("krSearchInputNum").innerHTML=e.length,d=!0,this._drawWordResult(e)},_getLeftHtml:function(a){for(var b='<div id="wordResultListLeft" class="wordresult-list-left floatleft">',c=0;a>c;c++)b+=c+1+"<br>";return b+="</div>"},_drawWordResult:function(a){for(var b=this._getLeftHtml(a.length),c='<div id="wordResultListRight" class="wordresult-list-right">',d=0,e=a.length;e>d;d++){var f=a[d];baidu.string.getByteLength(f)>24&&(f='<span title="'+f+'">'+triones.util.subByte(f,24)+"</span>"),c+='<a herf="javascript:void(0);">'+f+'<i class="close" value="'+a[d]+'"></i></a>'}c+="</div>",baidu.g("wordResultList").innerHTML=b+c},_toggleSearchInput:function(a,b){var e=a?"removeClass":"addClass";baidu.dom[e](b,"hide"),"krSearchPanel"==b?c=a?!0:!1:d=a?!0:!1,a||ui.get("krSearchInputRight").setValue(""),this._resizeRightHeight()},onAddWordALLHandler:function(a){this._toggleSearchInput(!0,"krSearchPanel");var b=ui.get("textLine"),c=ui.get("krSearchInputRight").getValue();c?this._searchWords(c):(b.setValue(""),b.addLines(a))},addEvent:function(){Eventer.addEventListener("ENTER_PACKAGE",this.onEnterPackage,this),Eventer.addEventListener("ON_BACK_TO_PACKAGE",this.onBackToPackage,this),Eventer.addEventListener("ON_GROUP_CHANGE",this.onGroupChange,this),Eventer.addEventListener("ON_SHOW_RECOM",this.onShowRecom,this),Eventer.addEventListener("ON_RECOM_CLICK",this.onRecomClick,this),Eventer.addEventListener("ON_DELETE_RECYCLE_WORD",this.onDeleteRecycle,this),Eventer.addEventListener("ON_ADD_RECYCLE_WORD",this.onAddRecycleWord,this),Eventer.addEventListener("ON_ADD_WORD_ALL",this.onAddWordALLHandler,this)},onDeleteRecycle:function(){this._setRecycleCount()},onAddRecycleWord:function(){var a=this;a._initRecycle()},_checkWordInRecycle:function(a){for(var b=window.recycledatasource,c=0,d=b.length,e=!1;d>c;c++){if(a.kw&&a.kw==b[c].kw){e=!0;break}if(a.wordId&&a.wordId==b[c].kw){e=!0;break}}return{flag:e,index:c}},onRecomClick:function(a){ui.get("krSearchInput").setValue(a)},setGroupText:function(a){baidu.g("selectGroupBtnText").innerHTML=a},onGroupChange:function(a){this.groupIds=a,this.setGroupText("共选择"+a.length+"个推广组")},onBackToPackage:function(){this.requirePackage()},onEnterPackage:function(a){this.requirePackageWord(a)},requirePackageWord:function(a){var b=this;b.subCtrl&&er.controller.unloadSub(b.subCtrl),b.subCtrl=null,baidu.addClass("krRecomAreaWraper","hide"),require(["addkeyword/packageword"],function(c){b.subCtrl=er.controller.loadSub(baidu.g("div-kt-wraper"),c,{queryMap:a,extraParam:b.getContext("extraParamForTradePackage"),groupIds:b.groupIds})})},requireRecomWord:function(){var a=this;a.subCtrl&&er.controller.unloadSub(a.subCtrl),a.subCtrl=null,a.showingType="word",require(["addkeyword/recomlist"],function(b){a.subCtrl=er.controller.loadSub(baidu.g("div-kt-wraper"),b,{queryMap:a.arg.queryMap,extraParam:a.getRecomListParams(),region:a.getRegionData(),kw:ui.get("krSearchInput").getValue()||"",groupIds:a.groupIds})})},getRegionData:function(){var a={};return this.radioUnlimitArea.getChecked()?a.isAllRegion=1:(a.isAllRegion=0,a.regionData=this.selectArea.getResultData().data),a},requirePackage:function(){var a=this;a.subCtrl&&er.controller.unloadSub(a.subCtrl),a.subCtrl=null,a.showingType="package",baidu.addClass("krRecomAreaWraper","hide"),require(["addkeyword/package"],function(b){a.subCtrl=er.controller.loadSub(baidu.g("div-kt-wraper"),b,{queryMap:a.arg.queryMap,extraParam:a.getContext("extraParamForTradePackage"),groupIds:a.groupIds,groupId:a.groupId})})},setUiIndex:function(){this.radioUnlimitArea=ui.get("radioUnlimitArea"),this.selectArea=ui.get("amArea"),this.radioLimitArea=ui.get("radioLimitArea")},getRecycleParams:function(){var a=this,b=[];this.radioUnlimitArea.getChecked()?b.push("isAllRegion=1"):(b.push("isAllRegion=0"),b.push(this.selectArea.getResultData().data));var c=a.getRegionAndTarget();return b=b.concat(c),b.join("&")},getRegionAndTarget:function(){var a=this,b=[];if(a.arg.queryMap&&a.arg.queryMap.ktAliveDays){b.push("ktAliveDays="+a.arg.queryMap.ktAliveDays);var c=parseInt(a.arg.queryMap.targeting)||parseInt(a.arg.queryMap.targetType);b.push("targeting="+c)}else b.push("ktAliveDays=7"),b.push("targeting=7");return b.push("pageSize=5000"),b},getPackageParam:function(){var a=this,b=a.flag,c=[];return c.push("isTmp="+this.arg.queryMap.isTmp),c.push("krFlag="+this.arg.queryMap.flag),this.groupId&&c.push("groupIds="+this.arg.queryMap.groupId),2==b&&c.push(this.groupIds.join("&")),c},getRecomListParams:function(){var a=this,b=this.getContext("extraParamWordList").slice(0),c=a.getRegionAndTarget();return c.concat(b)},onentercomplete:function(){},onleave:function(){this.subCtrl&&er.controller.unloadSub(this.subCtrl),Eventer.removeEventListener(null,null,this),baidu.un(window,"resize",this.onKrResize()),window.recycledatasource="",window.havedWords=""},getValueString:function(){var a=ui.get("textLine").getValueItems(),b={ktWords:a};return triones.util.jsonToQuery(b)},onSave:function(){var b=this;return function(){if(b._toggleSearchInput(!1,"krSearchNum"),baidu.hide("krHintDiv"),b.arg.queryMap.isSmartGroup&&!ui.get("textLine").getValueItems().length)return void triones.fullDlg.hide();if(a.valid()){if(!("create"==b.arg.queryMap.from||b.groupIds&&b.groupIds.length))return baidu.show("krHintDiv"),void(baidu.g("krHintDiv").innerHTML="请先选择推广组");switch(triones.monitor.record("id=AddKeyWordSaveRecord&type=button&text=保存成功"),b.arg.queryMap.from){case"create":case"singleModify":var c=ui.get("textLine").getValueItems(),d=window.havedWords.concat(c);d=triones.ktutil.noRepeatArr(d),Eventer.dispatchEvent("ON_KEYWORD_CONFIRMED",d),triones.fullDlg.hide();break;case"singleAdd":b.onBatchSaveFromHead();break;default:b.onBatchSaveKt()}}}},requireBatchSuccess:function(a){var b=this;require(["addkeyword/success"],function(c){triones.dlg.show("keyword-success",{onShow:function(d){this.controller=er.controller.loadSub(d.getBody(),c,{queryMap:b.arg.queryMap,datasource:a.result.detail,msg:"仅关键词推广组可加词，每推广组最多5000词，已有词不重复添加，详情如下。",mtype:"add"})},onConfirm:function(a){a.hide(),b._afterBatchSuccess()},onCancel:function(){this.controller&&er.controller.unloadSub(this.controller),b._afterBatchSuccess()}})})},_afterBatchSuccess:function(){var a=this;if(triones.fullDlg.hide(),"singleAdd"==a.arg.queryMap.from){var b="/kt/list~level=group";b+="&groupId="+a.arg.queryMap.groupId,b+="&planId="+a.arg.queryMap.groupAbstract.planId,triones.util.redirect("#"+b),triones.GlobalFadeInfo.show({content:"添加关键词成功",delay:3e3})}},onDownloadWords:function(){var a=this;return function(){if(!ui.get("downloadKWBtn").getState("disabled")){var b=[],c=ui.get("textLine").getValueItems();if(c.length&&!(c.length>5e3)){b.push("ktWords="+c.join("&ktWords=")),"create"==a.arg.queryMap.from?(b.push("isTmp=1"),b.push("groupId="+a.arg.groupId)):(b.push("isTmp="+a.arg.queryMap.isTmp||0),b.push("groupId="+(a.groupId||null)));var d=encodeURIComponent(b.join("&"));triones.request.iframepost(BEIDOU_ROOT+"cprogroup/downloadKTKeyword.action",d,"downloadNotice")}}}},onShowRecom:function(a){if(!a.length)return void baidu.addClass("krRecomAreaWraper","hide");baidu.removeClass("krRecomAreaWraper","hide");for(var b="",c=0;c<a.length;c++)b+="<div class=\"ui-kt-recom-list-related-recom-word-wrap\" onclick=\"Eventer.dispatchEvent('ON_RECOM_CLICK','"+a[c].relatedWord+"')\"><nobr>"+a[c].relatedWord+"</nobr></div>";baidu.g("krRecomArea").innerHTML=b},onBatchSaveFromHead:function(){var a=this,b=[],c=ui.get("textLine").getValueItems();c=c.concat(window.havedWords),c=triones.ktutil.noRepeatArr(c);var d={ktWords:c};c=triones.util.jsonToQuery(d),b.push(c),b.push("planId="+a.arg.queryMap.groupAbstract.planId),b.push("groupId="+a.arg.queryMap.groupId),b.push("ktAliveDays="+a.arg.queryMap.ktAliveDays),b.push("targetType="+a.arg.queryMap.targetType),b=b.join("&"),group.dao.reqUpdateGroupTargetKt(b,function(b,c){triones.util.isError(c)||a._afterBatchSuccess()})},recordBatchAdd:function(){var a=this;"batch"==a.arg.queryMap.from&&triones.monitor.record("id=AddKeyWordBatchAddRecord&type=button&text=多推广组批量添加关键词")},onBatchSaveKt:function(){var a=this,b=a.getValueString(),c=[];c.push(b),a.recordBatchAdd();var d={groupId:a.groupIds},e=triones.util.jsonToQuery(d);c.push(e),c.push("ktOpType=1"),c=c.join("&"),console&&console.log(c),group.dao.reqBatchHandlerKtData(c,function(b,c){if(!triones.util.isError(c)){var d=b.taskId;ui.Dialog.loadingDialog.show({frequence:500,content:"正在执行批量操作，请稍候…",getProgress:function(b){group.dao.reqBatchKtQuery(d,function(c){b(c.result.percent,c),1==c.result.status&&a.requireBatchSuccess(c)})},oncomplete:function(){}})}})}})}),define("addkeyword/package",function(){return new er.Action({specialTagSid:0,normalTagSid:0,sid:0,VIEW:"addkeywordpackage",groupIds:[],CONTEXT_QUERY_MAP:{order:"order",orderBy:"orderBy",tradeId:"tradeId",isAutoRecom:"isAutoRecom",seedWordList:"seedWordList"},CONTEXT_QUERY_MAP_PACKAGE:{tradeId:"tradeId",isAutoRecom:"isAutoRecom",seedWordList:"seedWordList",orderBy:"orderBy",order:"order"},CONTEXT_QUERY_MAP_RELATED_WORD:{isAllRegion:"isAllRegion",queryKw:"seedWordList",krFlag:"krFlag",ktAliveDays:"ktAliveDays",targeting:"targeting"},STATE_MAP:{isAutoRecom:1,isAllRegion:1,krFlag:0,seedWordList:[],ktAliveDays:7,targeting:7},UI_PROP_MAP:{tradePackageTable:{fields:triones.util.getFields(["tagName","tagDesc","relation","hot","pv","competition","options"],FIELDS_KT),noDataHtml:triones.util.noTableData("数据加载中..."),datasource:[],sortable:1}},CONTEXT_INITER_MAP:{init:function(a){var b=triones.env.get("tradeId")||0;this.setContext("tradeId",b),this.arg.queryMap&&this.arg.queryMap.flag&&this.setContext("krFlag",this.arg.queryMap.flag),this.groupIds=this.arg.groupIds,this.groupId=this.arg.groupId,a()}},addEvent:function(){Eventer.addEventListener("ON_KEYWORD_CHANGE",this.onKeyWordChange,this),Eventer.addEventListener("ON_REGION_CHANGE",this.onRegionChange,this)},onRegionChange:function(a){var b=this;b.setContext("isAllRegion",a.isAllRegion),b.setContext("regionData",a.data),b.getContext("seedWordList")&&b._getPackageRelatedWord()},onGroupChange:function(a){this.groupIds=a,""==ui.get("krSearchInput").getValue()&&this._onSearchPackage()},onKeyWordChange:function(a){this._onSearchPackage(a)},onleave:function(){Eventer.removeEventListener(null,null,this)},onafterrender:function(){var a=this;baidu.hide("tradePackageFilterWrapper");var b={seedWord:ui.get("krSearchInput").getValue(),suggestSid:0};a._onSearchPackage(b);var c=ui.get("tradePackageTable");c.onrowover=a._onPackageTableRowOver(),c.onrowout=a._onPackageTableRowOut(),c.onsort=a._onPackageTableSort(),c.onrowclick=a._onWordTableRowClick(),this.addEvent()},_loadinglen:0,_hideLoading:function(){0==this._loadinglen&&triones.loading.hide(triones.ktutil.loadingConfig)},_bindPackageEvents:function(){{var a=this,b=(ui.get("tradePackageTable"),baidu.dom.q("trade-package-title"));baidu.dom.q("trade-package-add-single-btn"),a.packageTableDS}baidu.array.each(b,function(b,c){b.onclick=function(){a._onEnterPackage(c)}})},_initAutoRecom:function(a){var b=this;a||group.tableDataService.clear(),b._reqAutoRecomList()},_reqAutoRecomList:function(){var a=this;triones.loading.show(triones.ktutil.loadingConfig),a._loadinglen=0,a._getPackageRelatedWord(),a._loadinglen++;var b=a._completeParam();group.dao.getTradePackageList(b,function(b,c){a._loadinglen--,a._hideLoading(),triones.util.isError(c)||a&&(a.packageTableDS=b.list,a.totalPackageNum=b.totalTagNum,a.totalWordNum=b.totalWordNum,a.specialTagSid=b.specialTagSid,a.normalTagSid=b.normalTagSid,a.setContext("specialTagSid",b.specialTagSid),a.setContext("normalTagSid",b.normalTagSid),a._renderPackageTable())})},_getPackageRelatedWord:function(){var a=this;
if(0==a.getContext("isAutoRecom")){a._loadinglen++;var b=a._getPackageRelateParams();require(["addkeyword/dao"],function(c){c.getRelatedWord(b,function(b,c){a._loadinglen--,a._hideLoading(),triones.util.isError(c)||a&&Eventer.dispatchEvent("ON_SHOW_RECOM",b.list)})})}},_getPackageRelateParams:function(){var a=this,b=a.getQueryByContext(this.CONTEXT_QUERY_MAP_RELATED_WORD);return 1!=a.getContext("isAllRegion")&&(b+="&"+a.getContext("regionData")),a.groupIds&&a.groupIds.length&&(b+="&"+triones.util.jsonToQuery({groupIds:a.groupIds})),a.groupId&&(b+="&groupId="+a.groupId),b},_completeParam:function(a){var b,c=this,d=c.arg.extraParam.join("&")+"&pageSize=10000&";b=a?d+triones.util.jsonToQuery(a):d+c.getQueryByContext(),1==c.isAutoRecom&&(b=b.replace("seedWordList=",""));var e="";return"-1"==b.indexOf("groupIds")&&(e=triones.util.jsonToQuery({groupIds:c.groupIds})),b+"&"+e},showTableError:function(a){group.tableDataService.clear(),a=triones.util.noTableData(a),ui.get("tradePackageTable").reRender({datasource:[],noDataHtml:a,sortable:0}),baidu.g("tradePackageSummaryNormal").innerHTML="推荐0个词包（0个词）"},_renderPackageTable:function(){var a=this;return function(){a.mode=0;var b=baidu.g("tradePackageSummaryNormal"),c=baidu.g("tradePackageSummaryForWord"),d=ui.get("tradePackageTable"),e=a.getContext("isAutoRecom"),f=a.totalPackageNum,g=a.totalWordNum;0===e?b.innerHTML="推荐"+f+"个词包（"+g+"个词）":1===e&&(b.innerHTML="量身推荐"+f+"个词包（"+g+"个词）"),baidu.dom.addClass(c,"hide"),baidu.dom.removeClass(b,"hide"),a.isAutoRecom&&0===a.packageTableDS.length?(a._hideAllDataContainer(!1),d.reRender({datasource:[],order:a.getContext("order"),orderBy:a.getContext("orderBy"),noDataHtml:triones.util.noTableData("对不起，没有合适的词包推荐，请您输入关键词搜索。"),sortable:1})):(a._hideAllDataContainer(!1),d.reRender({datasource:a.packageTableDS,order:a.getContext("order"),orderBy:a.getContext("orderBy"),noDataHtml:triones.util.noTableData("对不起，没有合适的行业词包推荐，请您尝试输入其他关键词。"),sortable:1}),a._bindPackageEvents())}()},_onEnterPackage:function(a){var b=this,c=a;return function(){var a=b.packageTableDS;b.wordTableOrder="",b.wordTableOrderBy="",b.currPackageName=a[c].tagName,b.currPackageId=a[c].tagId,b.includeWord="",b.themeWord="",b.themeWordId="";var d=ui.get("krSearchInput").getValue(),e=(triones.ktutil._parseKeyWord(d),{getWordFlag:1,tagName:b.currPackageName,tagId:b.currPackageId,tradeId:b.getContext("tradeId"),specialTagSid:b.specialTagSid,normalTagSid:b.normalTagSid});b.searchKeywordArr&&b.searchKeywordArr.length&&(e.seedWordList=b.searchKeywordArr),Eventer.dispatchEvent("ENTER_PACKAGE",e)}()},_onWordTableRowClick:function(){var a=this;return function(b,c){var d=new baidu.event.EventArg(c);if("trade-package-title"!=d.target.className){var e=triones.ktutil.getClickTrElement(b);if(e&&baidu.dom.hasClass(e,"skin-table-auto-row-selected"))return;a.onAddPackage(b)}}},reqPackageWord:function(a){{var b=this,c=a,d=b.packageTableDS;d[c]}b.currPackageId=d[c].tagId,b.currPackageName=d[c].tagName,b.currPackageId=d[c].tagId;var e={getWordFlag:1,tagName:b.currPackageName,tagId:b.currPackageId,tradeId:b.getContext("tradeId"),seedWordList:b.searchKeywordArr,specialTagSid:b.specialTagSid,normalTagSid:b.normalTagSid},f=b._completeParam(e);triones.loading.show(triones.ktutil.loadingConfig),group.dao.getTradeWordList(f,function(c,d){if(d&&2==d.status)return ui.Dialog.alert({title:"提示",zIndex:1001,level:2,content:d.statusInfo.global}),void triones.loading.show(triones.ktutil.loadingConfig);for(var e=[],f=c.list,g=f.length,h=0;g>h;h++)e.push(f[h].wordid);var i={tagId:b.currPackageId,specialTagSid:b.specialTagSid,normalTagSid:b.normalTagSid,sid:c.sid,wordids:e};triones.ktutil.printAcceptLog(i),Eventer.dispatchEvent("BATCH_ADD_WORD",c.list),b._disablePackageTableRow(a),triones.loading.hide(triones.ktutil.loadingConfig)})},onAddPackage:function(a){this.reqPackageWord(a)},_onSearchPackage:function(a){var b=this,c=!0;if(triones.tableDataService.clear(),a=a||{},a.seedWord=a.seedWord||"",b.setContext("order",""),b.setContext("orderBy",""),baidu.dom.addClass(baidu.g("krRecomAreaWraper"),"hide"),(b.groupIds&&b.groupIds.length||a.seedWord)&&(c=!1),c)return void b.showTableError("对不起，没有合适的词包推荐，请您输入关键词搜索。");var d=a.seedWord||ui.get("krSearchInput").getValue(),e=triones.ktutil._parseKeyWord(d);switch(b.searchKeywordArr=e.words,b.setContext("seedWordList",e.words),e.flag){case 0:b.showTableError("请至少输入一个包含2个字的关键词，才能为您获取较为准确的行业词包。");break;case 1:b.isAutoRecom=1,b.setContext("isAutoRecom",1),b._reqAutoRecomList();break;case 2:b.isAutoRecom=0,b.setContext("isAutoRecom",0),b._reqAutoRecomList();break;case 3:b.showTableError("对不起，没有合适的行业词包推荐，请您尝试输入其他关键词。")}},search:function(){var a=this,b={};b=""===a.packageTableOrderBy?{tradeId:a.tradeId,isAutoRecom:a.isAutoRecom,seedWordList:a.searchKeywordArr}:{tradeId:a.tradeId,isAutoRecom:a.isAutoRecom,seedWordList:a.searchKeywordArr,orderBy:a.packageTableOrderBy,order:a.packageTableOrder};var c=a._completeParam(b);triones.loading.show(triones.ktutil.loadingConfig),group.dao.getTradePackageList(c,function(b,c){return c&&2==c.status?(ui.Dialog.alert({title:"提示",zIndex:1001,level:2,content:c.statusInfo.global}),void triones.loading.hide(triones.ktutil.loadingConfig)):(a.packageTableDS=b.list,a.totalPackageNum=b.totalTagNum,a.totalWordNum=b.totalWordNum,a.specialTagSid=b.specialTagSid,a.normalTagSid=b.normalTagSid,a._renderPackageTable(),void triones.loading.hide(triones.ktutil.loadingConfig))})},_disablePackageTableRow:function(a){var b=triones.ktutil.getClickTrElement(a);b&&baidu.dom.addClass(b,"skin-table-auto-row-selected");var c="tradePackageTitle"+a,d="trade-package-package-name",e="trade-package-package-disabled";baidu.dom.removeClass(c,d),baidu.dom.addClass(c,e);var f="tradePackageAddSingleBtn"+a;baidu.dom.addClass(f,"trade-package-add-single-btn-disabled"),baidu.g(f).onclick=null},_hideAllDataContainer:function(a){a?baidu.dom.addClass(baidu.g("tradePackageSummaryWrapper"),"hide"):baidu.dom.removeClass(baidu.g("tradePackageSummaryWrapper"),"hide")},_onPackageTableRowOver:function(){return function(a){var b=ui.get("tradePackageTable").datasource;b[a].selected?(baidu.dom.removeClass(baidu.g("tradePackageAddSingleBtn"+a),"hide"),baidu.dom.removeClass(baidu.g("tradePackageAddSingleBtn"+a),"trade-package-add-single-btn-normal"),baidu.dom.addClass(baidu.g("tradePackageAddSingleBtn"+a),"trade-package-add-single-btn-disabled"),baidu.g("tradePackageAddSingleBtn"+a).title="已添加"):(baidu.dom.removeClass(baidu.g("tradePackageAddSingleBtn"+a),"hide"),baidu.dom.removeClass(baidu.g("tradePackageAddSingleBtn"+a),"trade-package-add-single-btn-disabled"),baidu.dom.addClass(baidu.g("tradePackageAddSingleBtn"+a),"trade-package-add-single-btn-normal"),baidu.g("tradePackageAddSingleBtn"+a).title="添加词包")}},_onPackageTableRowOut:function(){return function(a){baidu.dom.removeClass(baidu.g("tradePackageAddSingleBtn"+a),"trade-package-add-single-btn-disabled"),baidu.dom.removeClass(baidu.g("tradePackageAddSingleBtn"+a),"trade-package-add-single-btn-normal"),baidu.dom.addClass(baidu.g("tradePackageAddSingleBtn"+a),"hide")}},_onPackageTableSort:function(){var a=this;return function(b,c){a.setContext("order",c),a.setContext("orderBy",b.field),a._initAutoRecom(1)}}})}),define("addkeyword/packageword",["addkeyword/recomlistfilter"],function(a){return a.wordKey="word",new er.Action({VIEW:"addkeywordpackage",CONTEXT_QUERY_MAP:{getWordFlag:"getWordFlag",tagName:"tagName",tagId:"tagId",tradeId:"tradeId",seedWordList:"seedWordList",topicId:"themeWordId",rootName:"includeWord",specialTagSid:"specialTagSid",normalTagSid:"normalTagSid",order:"order",orderBy:"orderBy"},STATE_MAP:{isAutoRecom:1,seedWordList:[],getWordFlag:1},UI_PROP_MAP:{tradePackageTable:{fields:triones.util.getFields(["word","hot2","pv2","competition2"],FIELDS_KT),noDataHtml:triones.util.noTableData(""),datasource:[],sortable:1}},CONTEXT_INITER_MAP:{init:function(a){var b=triones.env.get("tradeId")||0;this.setContext("tradeId",b);for(var c in this.arg.queryMap)this.setContext(c,this.arg.queryMap[c]);this.groupIds=this.arg.groupIds,a()}},onafterrender:function(){this.requireWordTable(),baidu.hide("krInputFilter"),Eventer.addEventListener("ON_KEYWORD_CHANGE",this.onKeywordChange,this),Eventer.addEventListener("ON_RECYCLE_CONFIRM",this.onRecycleConfirm,this),Eventer.addEventListener("ON_TABLE_SORT",this.onTableSort,this)},onTableSort:function(a,b){this.setContext("order",a),this.setContext("orderBy",b),this._reqWordList()},onRecycleConfirm:function(){this._reqWordList()},onKeywordChange:function(){Eventer.dispatchEvent("ON_BACK_TO_PACKAGE")},loadTableSub:function(){var a=this,b=triones.ktutil.getNoHtml();this.subCtrl&&er.controller.unloadSub(this.subCtrl),this.subCtrl=er.controller.loadSub(baidu.g("tradePackageListWrapper"),AddKeyWordTableAction,{queryMap:a.arg.queryMap,noDataHtml:triones.util.noTableData(b)}),a._reqWordList()},requireWordTable:function(){var a=this;window.AddKeyWordTableAction?a.loadTableSub():require(["addkeyword/wordtable"],function(){a.loadTableSub()})},dataAdapter:function(a){for(var b=[],c=a.length,d=0;c>d;d++)a[d].name&&b.push({filterKey:a[d].name,rawHtml:a[d].name});return b},_completeParam:function(){var a=this,b=a.arg.extraParam.join("&")+"&pageSize=10000&",c=b+a.getQueryByContext();c=c.replace("seedWordList=&","");var d=triones.util.jsonToQuery({groupIds:a.groupIds});return c+"&"+d},_reqWordList:function(){var a=this,b=a._completeParam();triones.loading.show(triones.ktutil.loadingConfig),group.dao.getTradeWordList(b,function(b,c){return triones.loading.hide(triones.ktutil.loadingConfig),c&&2==c.status?void ui.Dialog.alert({title:"提示",zIndex:1001,level:2,content:c.statusInfo.global}):(b.list=triones.ktutil.filterRecycle(b.list),a.wordTableDS=b.list,a.batchAddWordBuffer=b.list,a.currPackageWordNum=b.list.length,a.sid=b.sid,a.arg.queryMap.sid=a.sid,a.unseletedWordCnt=a.wordTableDS.length,a.filterIncludeDS=a.dataAdapter(b.wordRoots||[]),a._renderIncludeFilter(),a.filterOriThemeDS=[],a.filterThemeDS=a.dataAdapter([]),a._renderThemeFilter(),a._renderWordTable(),baidu.removeClass("tradePackageFilterWrapper","hide"),void triones.loading.hide(triones.ktutil.loadingConfig))})},_renderWordTable:function(){var b=this;return function(){a.wordKey="word";var c=baidu.g("tradePackageSummaryNormal"),d=(baidu.g("tradePackageListWrapper"),baidu.g("tradePackageListWrapper"),baidu.g("tradePackageSummaryCurrPackage")),e=baidu.g("tradePackageSummaryForWord"),f=(ui.get("tradePackageTable"),b.getContext("tagName")),g=b.currPackageWordNum,h=f;baidu.string.getByteLength(f)>=24&&(h=""+baidu.string.subByte(f,24)+"..."),d.innerHTML='<span title="'+f+'">'+h+"("+g+"个词)</span>",b._renderBtns(),baidu.dom.removeClass(e,"hide"),baidu.dom.addClass(c,"hide"),b.filteredSource=a.filterSelected(b.wordTableDS),Eventer.dispatchEvent("LIST_LOADED",b.filteredSource),b._bindWordEvents()}()},_renderBtns:function(){var a=this,b=a.mode;0===b?baidu.dom.addClass("tradePackageSummaryBtnWrapper","hide"):baidu.dom.removeClass("tradePackageSummaryBtnWrapper","hide")},_renderIncludeFilter:function(){var a=this,b=a.mode,c=a.filterIncludeDS,d=a.getContext("includeWord");if(0===b||0===c.length)baidu.dom.addClass("tradePackageFilterInclude","hide");else{baidu.dom.removeClass("tradePackageFilterInclude","hide"),ui.get("tradePackageFilterIncludeGroup").setValue(c,d);for(var e=parseInt(baidu.getStyle(ui.get("tradePackageFilterIncludeGroup").__getId(),"width"),10);e>400;){if(c.pop(),0===c.length){baidu.dom.addClass("tradePackageFilterInclude","hide");break}ui.get("tradePackageFilterIncludeGroup").setValue(c,d),e=parseInt(baidu.getStyle(ui.get("tradePackageFilterIncludeGroup").__getId(),"width"),10)}}},_renderThemeFilter:function(){var a=this,b=a.mode,c=a.filterThemeDS;if(0===b||0===c.length)baidu.dom.addClass("tradePackageFilterTheme","hide");else{baidu.dom.removeClass("tradePackageFilterTheme","hide"),ui.get("tradePackageFilterThemeGroup").setValue(c,a.themeWord);for(var d=parseInt(baidu.getStyle(ui.get("tradePackageFilterThemeGroup").__getId(),"width"),10);d>400;){if(c.pop(),0===c.length){baidu.dom.addClass("tradePackageFilterTheme","hide");break}ui.get("tradePackageFilterThemeGroup").setValue(c,a.themeWord),d=parseInt(baidu.getStyle(ui.get("tradePackageFilterThemeGroup").__getId(),"width"),10)}}},_bindWordEvents:function(){var a=this,b=ui.get("tradePackageSummaryCrumbLink"),c=ui.get("tradePackageFilterIncludeGroup");b.onclick=a._onBackToPackageList(),c.onfilter=a._onFilteIncludeWord(),c.onUnfilter=a._onUnFilteWord(),ui.get("tradePackageSummaryBtnDl").onclick=a._onAddAllWords();var d=ui.get("downloadWordTableBtn");d.onclick=a.onDownloadWordList()},_onBackToPackageList:function(){return function(){Eventer.dispatchEvent("ON_BACK_TO_PACKAGE")}},onDownloadWordList:function(){var a=this;return function(){if(!ui.get("downloadWordTableBtn").getState("disabled")){for(var b=a.filteredSource,c=[],d=b.length-1;d>=0;d--){var e=b[d];if(!e.recycled){var f="";f+=a.getContext("tagName")+"	",f+=e.word+"	",f+=e.hot+"	",f+=e.pv+"	",f+=e.competition,c.push(f)}}var g={tagName:a.getContext("tagName"),tagId:a.arg.queryMap.tagId,tradeId:a.getContext("tradeId"),wordInfos:c},h=a.arg.extraParam.join("&")+"&pageSize=10000&",i=h+triones.util.jsonToQuery(g),j=BEIDOU_ROOT+"cprogroup/downloadTradeWord.action";triones.request.iframepost(j,i,"downloadNotice")}}},_onAddAllWords:function(){var a=this;return function(){for(var b=[],c=a.wordTableDS,d=c.length,e=0;d>e;e++)b.push(c[e].wordid);var f=a.arg.queryMap,g={tagId:f.tagId,specialTagSid:f.specialTagSid,normalTagSid:f.normalTagSid,sid:f.sid,wordids:b};triones.ktutil.printAcceptLog(g),Eventer.dispatchEvent("BATCH_ADD_WORD",a.wordTableDS)}},_onFilteIncludeWord:function(){var a=this;return function(b){a.setContext("includeWord",b),a._reqWordList()}},setDataSource:function(){var b=this,c=a.getSource();b.filteredSource=c,b.setWordCount(),Eventer.dispatchEvent("LIST_LOADED",c)},_onUnFilteWord:function(){var a=this;return function(){a.themeWord="",a.themeWordId="",a.setContext("includeWord",""),group.tableDataService.clear(),a._reqWordList()}},onleave:function(){this.subCtrl&&er.controller.unloadSub(this.subCtrl),Eventer.removeEventListener(null,null,this)},_doRecycleWord:function(a,b){var c=this,d="";c.getContext("seedWordList")&&c.getContext("seedWordList").length>0&&(d=c.getContext("seedWordList")[0]);var e={word:b.word,seedWord:d,krFrom:"tradeword"},f=triones.util.jsonToQuery(e);triones.loading.show({level:5}),group.dao.reqAddRecycleWord(f,function(d,e){return e&&2==e.status?(ui.Dialog.alert({title:"提示",zIndex:1001,level:2,content:e.statusInfo.global}),void triones.loading.hide({level:5})):(c.onRecycle()!==!1&&(b.recycled=1,c._recycledDataFilter[b.word]=1,c._toggleWordTableRowStyle(!0,a,"recycled"),c.unseletedWordCnt--,c._disableAddAllWordBtn(!c.unseletedWordCnt)),void triones.loading.hide({level:5}))})},_doClickWord:function(a,b){var c=this;c.onAddSingleWord(b)?(b.selected=!b.selected,c._toggleWordTableRowStyle(b.selected,a,"selected"),b.selected?(c.recordAddKwLog(b.wordid||0),c.unseletedWordCnt--,c._disableAddAllWordBtn(!c.unseletedWordCnt),c.toggleErrorTip(!1)):(c.unseletedWordCnt++,c._disableAddAllWordBtn(0))):c.toggleErrorTip(!0,1)},onGetDataFilter:function(){}})}),define("addkeyword/recomlist",["addkeyword/recomlistfilter"],function(a){return a.wordKey="kw",a.rootKey="kwRoot",new er.Action({VIEW:"addkeywordpackage",_selectedDataFilter:{},_recycledDataFilter:{},filteredSource:[],typeSource:[{filterKey:"1",rawHtml:'<div class="kw-gold-label" style="float:left;">淘金词</div><div class="kw-gold-icon" title="具有一定展现量、竞争尚不激烈、物美价廉的词"></div>'},{filterKey:"0",rawHtml:"其他"}],CONTEXT_QUERY_MAP:{order:"order",orderBy:"orderBy",suggestSid:"suggestSid",queryKw:"queryKw",isAllRegion:"isAllRegion",relatedSid:"relatedSid"},STATE_MAP:{isAutoRecom:1,seedWordList:[],isAllRegion:1},UI_PROP_MAP:{tradePackageTable:{fields:triones.util.getFields(["kw","uv","awgdscnt","compdg"],KT_MODULE_RECOM_FIELDS),noDataHtml:triones.util.noTableData(""),datasource:[],sortable:1},ktIncludeInput:{displayInputHeight:20,showInfo:1,rule:"AtLeftFilterRule",tipText:"最多输入3个关键词，用逗号隔开"},ktExcludeInput:{displayInputHeight:20,showInfo:1,rule:"AtLeftFilterRule",tipText:"最多输入3个关键词，用逗号隔开"}},CONTEXT_INITER_MAP:{init:function(a){var b=triones.env.get("tradeId")||0;this.setContext("tradeId",b);for(var c in this.arg.queryMap)this.setContext(c,this.arg.queryMap[c]);if(this.arg.region){var d=this.arg.region;this.setContext("isAllRegion",d.isAllRegion),this.setContext("regionData",d.regionData)}this.setContext("queryKw",this.arg.kw),a()}},addEvent:function(){Eventer.addEventListener("ON_KEYWORD_CHANGE",this.onKeywordChange,this),Eventer.addEventListener("ON_REGION_CHANGE",this.onRegionChange,this),Eventer.addEventListener("ON_RECYCLE_CONFIRM",this.onRecycleConfirm,this),Eventer.addEventListener("ON_TABLE_SORT",this.onTableSort,this)},onTableSort:function(a,b){ui.get("krSearchInput").getValue()&&(this.setContext("order",a),this.setContext("orderBy",b),this._reqWordList())},onRecycleConfirm:function(){var a=this;a.getContext("queryKw")&&a._reqWordList()},onGroupChange:function(){this._handlerWhileNULL(ui.get("krSearchInput").getValue())},onRegionChange:function(a){var b=this;b.setContext("isAllRegion",a.isAllRegion),b.setContext("regionData",a.data),b.getContext("queryKw")&&b._reqWordList()},onKeywordChange:function(a){var b=this;b.setContext("queryKw",a.seedWord),b.setContext("suggestSid",a.suggestSid);var c=b._handlerWhileNULL(a.seedWord);c||b.requireWordTable()},_handlerWhileNULL:function(a){if(!a){var b=baidu.g("wordTab");return baidu.dom.addClass("krRecomAreaWraper","hide"),b.enforce=!0,b.onclick.call(b),!0}},onafterrender:function(){this.addEvent(),this.requireWordTable()},loadTableSub:function(){var a=this,b=triones.ktutil.getNoHtml();if(ui.get("ktIncludeInput").setValue(""),ui.get("ktExcludeInput").setValue(""),a.tableController&&er.controller.unloadSub(a.tableController),a.tableController=er.controller.loadSub(baidu.g("tradePackageListWrapper"),AddKeyWordTableAction,{queryMap:"",fields:triones.util.getFields(["kw","uv","awgdscnt","compdg"],KT_MODULE_RECOM_FIELDS),noDataHtml:triones.util.noTableData(b)}),""!=ui.get("krSearchInput").getValue())a._reqWordList();else{var c='<div class="no-data-table-row">对不起，没有合适的关键词推荐，请您输入关键词搜索。</div>';baidu.g("ctrltablewordtablebody").innerHTML=c}},requireWordTable:function(){var a=this;window.AddKeyWordTableAction?a.loadTableSub():require(["addkeyword/wordtable"],function(){a.loadTableSub()})},dataAdapter:function(a){for(var b=[],c=a.length,d=0;c>d;d++)b.push({filterKey:a[d],rawHtml:a[d]});return b},_getRecomListParams:function(){var a=this,b=a.arg.extraParam.join("&"),c=a.getQueryByContext();return 1!=a.getContext("isAllRegion")&&(c=c+"&"+a.getContext("regionData")),b+"&"+c},_reqWordList:function(){var b=this,c=b._getRecomListParams();triones.loading.show(triones.ktutil.loadingConfig),group.dao.reqRecmdGroupKtData(c,function(c,d){if(!b)return void triones.loading.hide(triones.ktutil.loadingConfig);if(triones.util.isError(d))b.wordTableDS=[],b.filterIncludeDS=[],triones.loading.hide(triones.ktutil.loadingConfig);else{a.wordKey="kw",b.setContext("relatedSid",c.relatedSid),b.recommSid=c.recommSid,b.setContext("recommSid",c.recommSid),b._relatedRecomSource=c.relatedList||[],Eventer.dispatchEvent("ON_SHOW_RECOM",c.relatedList);var e=ui.get("ktIncludeInput").getValue();e&&(a.includeWords=e.split(","));var f=ui.get("ktExcludeInput").getValue();f&&(a.excludeWords=f.split(",")),a.oriDatasource=c.list,(e||f)&&(c.list=a.getSource()),b.wordTableDS=c.list,b.filterIncludeDS=b.dataAdapter(c.kwRoots||[]),b._renderIncludeFilter(),b._haveGoldWord=c.haveGoldWord||0,b.currPackageWordNum=c.list.length,b.filterOriThemeDS=b.typeSource,b.filterThemeDS=b.typeSource,b._renderThemeFilter(),b._renderWordTable(),triones.loading.hide(triones.ktutil.loadingConfig)}})},setWordCount:function(){var a=baidu.g("tradePackageSummaryCurrPackage"),b=this.filteredSource||this.wordTableDS;a.innerHTML="<span >推荐结果("+b.length+"个词)</span>"},_renderWordTable:function(){var b=this;return function(){var c=baidu.g("tradePackageSummaryNormal"),d=(baidu.g("tradePackageListWrapper"),baidu.g("tradePackageListWrapper"),baidu.g("tradePackageSummaryForWord")),e=b.getContext("tagName"),f=(b.currPackageWordNum,e);baidu.string.getByteLength(e)>=24&&(f=""+baidu.string.subByte(e,24)+"..."),baidu.dom.removeClass("tradePackageSummaryBtnWrapper","hide"),baidu.dom.removeClass(d,"hide"),baidu.dom.addClass(c,"hide"),b.filteredSource=a.filterSelected(b.wordTableDS),b.setWordCount(),Eventer.dispatchEvent("LIST_LOADED",b.filteredSource,b.getContext("order"),b.getContext("orderBy")),baidu.removeClass("tradePackageFilterWrapper","hide"),b._bindWordEvents()}()},getItemWord:function(a){return a.word||a.kw},_renderIncludeFilter:function(){var a=this,b=a.mode,c=a.filterIncludeDS,d=a.getContext("includeWord");if(0===b||0===c.length)baidu.dom.addClass("tradePackageFilterInclude","hide");else{baidu.dom.removeClass("tradePackageFilterInclude","hide"),ui.get("tradePackageFilterIncludeGroup").setValue(c,d);for(var e=parseInt(baidu.getStyle(ui.get("tradePackageFilterIncludeGroup").__getId(),"width"),10);e>400;){if(c.pop(),0===c.length){baidu.dom.addClass("tradePackageFilterInclude","hide");break}ui.get("tradePackageFilterIncludeGroup").setValue(c,d),e=parseInt(baidu.getStyle(ui.get("tradePackageFilterIncludeGroup").__getId(),"width"),10)}}},_renderThemeFilter:function(){var a=this,b=a.mode,c=a.filterThemeDS;if(0===b||0===c.length||0===a.filterIncludeDS.length)baidu.dom.addClass("tradePackageFilterTheme","hide");else{baidu.dom.removeClass("tradePackageFilterTheme","hide"),ui.get("tradePackageFilterThemeGroup").setValue(c,a.themeWord);for(var d=parseInt(baidu.getStyle(ui.get("tradePackageFilterThemeGroup").__getId(),"width"),10);d>400;){if(c.pop(),0===c.length){baidu.dom.addClass("tradePackageFilterTheme","hide");break}ui.get("tradePackageFilterThemeGroup").setValue(c,a.themeWord),d=parseInt(baidu.getStyle(ui.get("tradePackageFilterThemeGroup").__getId(),"width"),10)}}},_bindWordEvents:function(){var a=this,b=(ui.get("tradePackageSummaryCrumbLink"),ui.get("tradePackageFilterIncludeGroup")),c=ui.get("tradePackageFilterThemeGroup");baidu.hide(ui.get("tradePackageSummaryCrumbLink")._main),b.onfilter=a._onFilteIncludeWord(),c.onfilter=a._onFilteThemeWord(),b.onUnfilter=a._onUnFilterRoot(),c.onUnfilter=a._onUnFilterType(),ui.get("tradePackageSummaryBtnDl").onclick=a._onAddAllWords();var d=ui.get("downloadWordTableBtn");d.onclick=a.onDownLoad();var e=ui.get("ktIncludeInput"),f=ui.get("ktExcludeInput");e.onconfirm=a.onConfirmInclude(),f.onconfirm=a.onConfirmExclude(),e.onedit=a.onEditInclude(),f.onedit=a.onEditExclude(),e.oncancel=a.onCancelInclude(),f.oncancel=a.onCancelExclude()},onEditExclude:function(){var a=this;return function(){a._disableAnotherFilterInput("include",1)}},onEditInclude:function(){var a=this;return function(){a._disableAnotherFilterInput("exclude",1)}},onCancelExclude:function(){var a=this;return function(){a._disableAnotherFilterInput("include",0)}},onCancelInclude:function(){var a=this;return function(){a._disableAnotherFilterInput("exclude",0)}},onConfirmExclude:function(){var b=this;return function(c,d){var e,f=c.split(/[，,]/);b.includeRecord("exclude",f),b._disableAnotherFilterInput("include",0),a.excludeWords=f,b.setDataSource(),e={recommSid:b.recommSid,include:c,exclude:"",isInput:1},d()}},includeRecord:function(a,b){if(""!==b.join("")){var c=b.length,d="",e="";"include"==a?c>1?(e="AddKeyWordIncludeMoreRecord",d="包含多个关键词"):(e="AddKeyWordIncludeOneRecord",d="包含1个关键词"):c>1?(e="AddKeyWordExcludeMoreRecord",d="不包含多个关键词"):(e="AddKeyWordExcludeOneRecord",d="不包含1个关键词"),triones.monitor.record("id="+e+"&type=button&text="+d)}},onConfirmInclude:function(){var b=this;return function(c,d){var e,f=c.split(/[，,]/);b.includeRecord("include",f),b._disableAnotherFilterInput("exclude",0),a.rootWords=[],a.includeWords=f,b.setDataSource();var g=ui.get("tradePackageFilterIncludeGroup");g.setValue(g.datasource,null),e={recommSid:b.recommSid,include:c,exclude:"",isInput:1},d()}},_disableAnotherFilterInput:function(a,b){var c;switch(a){case"include":c="ktIncludeInput";break;case"exclude":c="ktExcludeInput"}ui.get(c).disable(b)},_onBackToPackageList:function(){return function(){Eventer.dispatchEvent("ON_BACK_TO_PACKAGE")}},onDownLoad:function(){var a=this;return function(){if(!ui.get("downloadWordTableBtn").getState("disabled")){{var b,c,d,e,f,g,h,h=a.filteredSource;a.getContext("isAutoRecom")}for(b=a._getRecomListParams(),c="downloadRecommWord",b+="&downloadWordsCount="+a.filteredSource.length,d=BEIDOU_ROOT+"cprogroup/"+c+".action",e=0,f=h.length;f>e;e++)g=h[e],g.recycled||(b+="&words="+g.kw);triones.request.iframepost(d,b,"downloadNotice")}}},_onAddAllWords:function(){var a=this;return function(){Eventer.dispatchEvent("BATCH_ADD_WORD",a.filteredSource)}},_onFilteIncludeWord:function(){{var b=this;ui.get("tradePackageFilterThemeGroup")}return function(c){b.setContext("includeWord",c),a.includeWords=[],a.rootWords=[c],b.setDataSource()}},setDataSource:function(){var b=this,c=a.getSource();b.filteredSource=c,b.setWordCount(),Eventer.dispatchEvent("LIST_LOADED",c)},_onFilteThemeWord:function(){{var b=this;ui.get("tradePackageFilterIncludeGroup")}return function(c){a.typeWords=[c],b.setDataSource()}},_onUnFilterRoot:function(){var b=this;return function(){a.rootWords=[],b.setDataSource()}},_onUnFilterType:function(){var b=this;return function(){a.typeWords=[],b.setDataSource()}},onleave:function(){er.controller.unloadSub(this.tableController),Eventer.removeEventListener(null,null,this)},_doRecycleWord:function(a,b){var c=this,d={word:b.word,seedWord:c.searchKeywordArr[0]||"",krFrom:"tradeword"},e=triones.util.jsonToQuery(d);triones.loading.show({level:5}),group.dao.reqAddRecycleWord(e,function(d,e){return e&&2==e.status?(triones.loading.hide({level:5}),void ui.Dialog.alert({title:"提示",zIndex:1001,level:2,content:e.statusInfo.global})):(c.onRecycle()!==!1&&(b.recycled=1,c._recycledDataFilter[b.word]=1,c._toggleWordTableRowStyle(!0,a,"recycled"),c.unseletedWordCnt--,c._disableAddAllWordBtn(!c.unseletedWordCnt)),void triones.loading.hide({level:5}))})}})});var KT_MODULE_RECOM_FIELDS={kw:{title:"关键词",align:"left",sortable:!0,dragable:!0,field:"kw",minWidth:200,width:220,content:function(a,b){var c=[],d="";return a.recycled?d="kw-cus-recycled":a.selected&&(d="kw-cus-clicked"),c.push('<div  id="kwCusWrap_'+b+'" class="'+d+'">'),c.push('<div class="kw-wrap">'),c.push('<div class="kw-text"  title="'+a.kw+'">'+a.kw+"</div>"),a.reasonId&&1==a.reasonId&&c.push('<div class="kw-gold" title="具有一定展现量、竞争尚不激烈、物美价廉的词"></div>'),c.push("</div>"),c.push('<div id="RecycleBin'+b+'" class="recycle-bin" title="移除至回收站，不要再出现该关键词"></div>'),c.push('<div id="PR'+b+'" class="pr"></div>'),c.push("</div>"),c.join("")}},uv:{title:function(){return"覆盖人数"},align:"left",sortable:!0,dragable:!0,field:"uv",width:79,minWidth:65,content:function(a){return-1==a.uv?"--":ctkrTableConfig.fieldHelper.qtCount(a.uv)}},awgdscnt:{title:function(){return"日均展现量"+triones.util.tip("日均展现量","最近一周关键词在网盟的日均展现次数。一般来说，推广地域越广，关键词的日均展现量越大。")},align:"left",sortable:!0,dragable:!0,width:110,minWidth:70,field:"awgdscnt",content:function(a){if(-1==a.awgdscnt)return"--";var b=a.awgdscnt,c="";switch(b){case 5:c="<5";break;case 20001:c=">20000";break;default:c=b}return c}},compdg:{title:function(){return"竞争度"+triones.util.tip("竞争激烈程度","蓝色条形图越长，添加该词的网盟客户就越多。")},align:"left",sortable:!0,dragable:!0,width:86,minWidth:85,stable:1,field:"compdg",content:function(a){var b=a.compdg,c=7,d='<div class="boxbr"><div class="boxcn" style="font-size:0px;overflow:hidden;width:',e=b*c+"px";return d+=e+'"></div></div>'}},advanceUv:{title:function(){return"覆盖人数（高级）"+triones.util.tip("覆盖人数（高级）","在百度搜索过该关键词或该关键词在高级匹配模式下的扩展词的网民人数。")},align:"left",sortable:!0,dragable:!0,width:80,minWidth:80,field:"advanceUv",content:function(a){return ctkrTableConfig.fieldHelper.qtCount(a.advanceUv)}},advanceDscnt:{title:function(){return"日均展现量（高级）"+triones.util.tip("日均展现量（高级）","最近一周该关键词及该关键词在高级匹配模式下的扩展词在网盟的日均展现次数。")},align:"left",sortable:!0,dragable:!0,width:85,minWidth:85,field:"advanceDscnt",content:function(a){return ctkrTableConfig.fieldHelper.avgDisplayCount(a.advanceDscnt)}}};define("addkeyword/recomlistfilter",["addkeyword/filterutil"],function(a){var b={rootWords:[],includeWords:[],excludeWords:[],typeWords:[],selectedWords:[],recycle:[],wordKey:"",rootKey:"",typeKey:"reasonId",oriDatasource:[],filteredSource:[],getSource:function(){var c,d=b.typeWords;return b.typeWords.length&&(c=a.includeWords(b.oriDatasource,d,b.typeKey)),c=b.filterSelected(c),d=b.includeWords,d.length?c=a.includeWords(c,d,b.wordKey):(d=b.rootWords,b.rootWords.length&&(c=a.includeWords(c,d,b.rootKey))),d=b.excludeWords,d.length&&(c=a.excludeWords(c,d,b.wordKey)),c},filterSelected:function(a){for(var c=a||b.oriDatasource,d=ui.get("textLine").getValueItems(),e=b.wordKey,f=0;f<c.length;f++){for(var g=c[f],h=g[e+""],i=!1,j=0;j<d.length;j++)if(h==d[j]){c[f].selected=1,i=!0;break}i||(c[f].selected=0)}return c},filterRecycle:function(){}};return b}),define("addkeyword/recycle",["addkeyword/recyclefields"],function(a){return new er.Action({VIEW:"addkeywordrecycle",CONTEXT_QUERY_MAP:{order:"order",orderBy:"orderBy"},UI_PROP_MAP:{"kt-recycle":{sortable:!0,dragable:!0,noDataHtml:triones.util.noTableData("数据加载中..."),fields:triones.util.getFields(["kw","uv","awgdscnt","compdg"],a),datasource:"*datasource",width:688}},CONTEXT_INIT_MAP:{init:function(){}},onafterrender:function(){var a=this,b=ui.get("btnResetAll"),c=ui.get("kt-recycle");c.onrowover=a._doTableRowOverHandler(),c.onsort=a._doTableSortHandler(),b.onclick=a._doResetAll(),group.tableDataService.clear(),a.reqTableData()},updateCount:function(){baidu.g("spnCurreCount").innerHTML=this.curreCount},reqTableData:function(){var a=this;triones.tableDataService.clear();var b=a.arg.queryParams,c=a.getQueryByContext();c&&(b+="&"+c),b&&group.dao.getKrRecycleWord(b,function(b,c){triones.loading.hide({level:5}),triones.util.isError(c)||(window.recycledatasource=b.list,Eventer.dispatchEvent("ON_DELETE_RECYCLE_WORD"),a.setContext("datasource",b.list),a.curreCount=b.list.length,a.datasource=b.list,a.refreshUI())})},_doTableRowOverHandler:function(){var a=this;return function(b){var c=this._getRow(b),d=this.datasource[b],e=baidu.q("px",c);e&&(e[0].title="点击还原",e[0].onclick=function(){group.dao.delKrRecycleWord("wordId="+d.wordId,function(b,c){return c&&2==c.status?void ui.Dialog.alert({type:"warning",title:"系统提示",content:c.statusInfo&&c.statusInfo.global||"系统内部错误"}):(triones.tableDataService.clear(),a.fromMain=0,void a.reqTableData())})})}},_doTableSortHandler:function(){var a=this;return function(b,c){a.setContext("order",c),a.setContext("orderBy",b.field),a.reqTableData()}},refreshUI:function(){var a=this;a.updateCount(),ui.get("kt-recycle").reRender({datasource:a.datasource,noDataHtml:triones.util.noTableData("暂无移除的关键词")}),a.curreCount?(ui.get("btnResetAll").disable(!1),ui.get("btnResetAll")._main.style.color="#003399"):(ui.get("btnResetAll").disable(!0),ui.get("btnResetAll")._main.style.color="#666")},getRecycleData:function(){var a=this,b=a._map(a.datasource);return b},_map:function(a){var b,c={},d=a.length;for(b=0;d>b;b++)c[a[b].kw]=!0;return c},_doResetAll:function(){var a=this;return function(){ui.Dialog.confirm({level:2,zIndex:1100,title:"确认提示",content:"您确认还原全部关键词吗？",onok:function(){group.dao.delAllKrRecycleWord("",function(b,c){if(!triones.util.isError(c)){var d=baidu.g("resetAllTip");baidu.dom.setStyle(d,"display","block"),window.setTimeout(function(){baidu.dom.setStyle(d,"display","none")},4e3),triones.tableDataService.clear(),a.datasource=[],a.curreCount=0,a.refreshUI(),window.recycledatasource=[],Eventer.dispatchEvent("ON_DELETE_RECYCLE_WORD")}})}})}}})}),define("addkeyword/recyclefields",function(){var a={kw:{title:"关键词",align:"left",sortable:!0,field:"kw",minWidth:100,width:180,content:function(a,b){var c=[],d="";return c.push('<div  id="kwCusWrap_'+b+'" class="'+d+'">'),c.push('<div class="kw-wrap">'),c.push('<div class="kw-text"  title="'+a.kw+'">'+a.kw+"</div>"),c.push("</div>"),c.push('<div id="PX'+b+'" class="px"></div>'),c.push("</div>"),c.join("")
}},uv:{title:"覆盖人数",align:"right",sortable:!0,field:"uv",width:100,minWidth:80,content:function(a){return-1==a.uv?"--":ktRecycleTableConfig.fieldHelper.avgSearchCount(a.uv)}},awgdscnt:{title:function(){return"日均展现量"+triones.util.tip("日均展现量","最近一周关键词在网盟的日均展现次数。一般来说，推广地域越广，关键词的日均展现量越大。")},align:"right",sortable:!0,field:"awgdscnt",width:120,minWidth:70,content:function(a){return-1==a.awgdscnt?"--":ktRecycleTableConfig.fieldHelper.avgDisplayCount(a.awgdscnt)}},compdg:{title:function(){return"竞争激烈度"+triones.util.tip("竞争激烈程度","蓝色条形图越长，添加该词的网盟客户就越多。")},align:"left",sortable:!0,field:"compdg",width:120,minWidth:85,stable:1,content:function(a){return ktRecycleTableConfig.fieldHelper.compitionDegree(a.compdg)}}};return a}),define("addkeyword/region",function(){return{init:function(){var a=this;baidu.on("btnSelectArea","click",function(){a.toggleAreaSelect()});var b=ui.get("btnAreaConfirm"),c=ui.get("btnAreaCancel");b.onclick=a.onRegionConfirm(),c.onclick=function(){a.toggleAreaSelect()},ui.get("radioUnlimitArea").onclick=function(){baidu.hide("areaWraper")},ui.get("radioLimitArea").onclick=function(){baidu.show("areaWraper")}},onRegionConfirm:function(){var a=this;return function(){var b,c=ui.get("radioUnlimitArea").getChecked(),d=ui.get("amArea"),e=baidu.g("btnSelectArea");if(a._isAllRegion=c?1:0,c)a.data=null,e.innerHTML="不限";else{if(b=d.getResultData(),1==b.status)return a._showRegionTip("请至少选择一个投放地域。"),!1;a.data=b.val,a.rawData=b;var f=triones.ktutil.getRegionDesc(a.rawData);e.innerHTML=f}a.toggleAreaSelect(),Eventer.dispatchEvent("ON_REGION_CHANGE",{isAllRegion:a._isAllRegion,data:a.rawData.data})}},_showRegionTip:function(a){baidu.show("hintDIV"),baidu.g("hintDIV").innerHTML=a},hideRegionTip:function(){baidu.hide("hintDIV")},toggleAreaSelect:function(){var a=baidu.g("btnSelectArea");this.hideRegionTip(),baidu.dom.hasClass(a,"kr-drop-btn-hover")?(baidu.removeClass(a,"kr-drop-btn-hover"),baidu.hide("kr-area-container")):(baidu.addClass(a,"kr-drop-btn-hover"),baidu.show("kr-area-container").style.display="block")}}}),define("addkeyword/success",function(){return new er.Action({VIEW:"addkeywordsuccess",UI_PROP_MAP:{successTable:{fields:"*commonfields",noDataHtml:triones.util.noTableData("数据加载中"),datasource:"*ds",sortable:1}},CONTEXT_INITER_MAP:{init:function(a){if(this.setContext("ds",this.arg.datasource),this.arg.datasource.length>0){{this.arg.msg}"add"==this.arg.mtype?(this.setContext("commonfields",triones.util.getFields(["planname","groupname","keywordnum"],FIELDS_SUCCESS)),this.setContext("msg",this.arg.msg)):(this.setContext("commonfields",triones.util.getFields(["planname","groupname","delkeywordnum"],FIELDS_SUCCESS)),this.setContext("msg",this.arg.msg))}a()}},onafterrender:function(){baidu.g("divTip").innerHTML=this.getContext("msg")}})});var FIELDS_SUCCESS={planname:{title:function(){return"推广计划"},align:"left",field:"planname",width:79,minWidth:65,content:function(a){return a.planName}},groupname:{title:function(){return"推广组"},align:"left",field:"groupname",width:79,content:function(a){return a.groupName}},keywordnum:{title:function(){return"新增词数"},align:"left",field:"keywordnum",width:79,minWidth:65,content:function(a){return a.keywordNum}},delkeywordnum:{title:function(){return"删除词数"},align:"left",field:"keywordnum",width:79,minWidth:65,content:function(a){return a.keywordNum}}};triones.ktutil={loadingConfig:{ID:"newLoading",CtnId:"newLoadContent",level:"ai"},isValidKW:function(a,b){b=b||a;var c="",d=1;a.length||(c="请输入关键词",d=0),window.havedWords=window.havedWords||[];var e=5e3-window.havedWords.length;if(e=0>e?0:e,a.length>e)return c="您选择的关键词超过最多允许数量"+e+"，请修改后再保存。",d=-1,{ok:d,msg:c};var f=triones.ktutil.checkLines(b);if(f.length>0){var g=f.join("、"),h="";h=g.length>24?'<span title="'+g+'">'+g.slice(0,24)+"...</span>":g,c="以下各行关键词格式不合法：",c+='<a href="http://yingxiao.baidu.com/support/wm/detail_5801.html?castk=LTE%3D" target="_blank">查看详情</a><br>',c+=h,d=0}return{ok:d,msg:c}},isGroupValidKW:function(a,b){b=b||a;var c="",d=1;if(a.length||(c="请输入关键词",d=0),a.length>5e3)return c="您选择的关键词超过最多允许数量5000，请修改后再保存。",d=-1,{ok:d,msg:c};var e=triones.ktutil.checkLines(b);if(e.length>0){var f=e.join("、"),c="以下各行关键词格式不合法：";c+='<a href="http://yingxiao.baidu.com/support/wm/detail_5801.html?castk=LTE%3D" target="_blank">查看详情</a><br>',c+=f,d=0}return{ok:d,msg:c}},checkLines:function(a){var b,c=[];for(i=0;i<a.length;i++)b=a[i],triones.ktutil.filt(b)||c.push(i+1);return c},filt:function(a){var b,c,d,e=/^([a-zA-Z0-9\.\-\+\/\#\s\u4e00-\u9fa5])+$/;return(c=baidu.string.trim(a))?(c=c.replace(/\s+/g," "),d=c.match(/^\{(.*)\}$/),d&&(c=d[1]),b=c.replace(/[^\x00-\xff]/g,"00"),!e.test(c)||b.length>40?!1:d?d[0]:c):!0},getTop:function(a){var b=a.offsetTop,c=a;do b+=parseInt(c.offsetParent.offsetTop),c=c.offsetParent;while(c.offsetParent);return b},_parseKeyWord:function(a){function b(a,b){var c=baidu.string.getByteLength(a),d=baidu.string.getByteLength(b);return d>c?1:c>d?-1:c==d?triones.util.localeCompare(a,b):void 0}function c(a){return a>=33&&47>=a||a>=58&&64>=a||a>=91&&96>=a||a>=123&&126>=a||32==a}function d(a){var b=/^[\u4e00-\u9fa5]$/g;return b.test(a)}var e,f=a,g=[],h=[],i=0;for(f.length>=256&&(f=f.substring(0,256));c(f.charCodeAt(0));)f=f.substring(1,f.length);for(;c(f.charCodeAt(f.length-1));)f=f.substring(0,f.length-1);if(0===f.length)i=1,e=[];else{for(var j=0;j<f.length;j++){var k=f.charCodeAt(j);c(k)&&g.push(j)}if(g.length<1)h.push(f);else if(1==g.length)h.push(f.substring(0,g[0])),h.push(f.substring(g[0]+1,f.length));else if(g.length>=2){h.push(f.substring(0,g[0]));for(var l=0;l!=g.length-1;)h.push(f.substring(g[l]+1,g[l+1])),l++;h.push(f.substring(g[l]+1,f.length))}for(var m=[],j=h.length-1;j>=0;j--)h[j]&&m.push(h[j]);if(h.sort(b),0!==h.length){var n=h[0];d(n)?(i=3,e=[]):baidu.string.getByteLength(n)>=2?(i=2,e=m):(i=0,e=[])}}return{flag:i,words:e}},getRegionDesc:function(a){var b=a.map,c="",d=0;for(var e in b)1>=d&&(c+=b[e].name,c+="、"),d++;return c=0==d?"不限":1==d?c.slice(0,-1):2==d?c.slice(0,-1):c.slice(0,-1)+"..."},filterRecycle:function(a){for(var b,c,d=0,e=window.recycledatasource.length;d<a.length;d++)for(c=a[d].word||a[d].kw,b=0;e>b;b++)if(c==window.recycledatasource[b].kw){a.splice(d,1),d--;break}return a},setListMaxHeight:function(a,b){var c=baidu.page.getViewHeight(),d=c-b,d=100>d?100:d;baidu.g(a).style.maxHeight=d+"px"},noRepeatArr:function(a){var b,c,d=a,e=d.length,f={},g=[];for(b=0;e>b;b++)c=baidu.trim(d[b]),0===c.length||f[c]||(f[c]=1,g.push(c));return g},getMaxLimitWordsNum:function(){var a=5e3-window.havedWords.length;return a=0>a?0:a},setKrWordsNum:function(a){var b=triones.ktutil.getMaxLimitWordsNum(),c=["(",a,"/",b,")"].join("");baidu.g("krSelectWordsNum").innerHTML=c},showKrWordsOverMax:function(a){var b=triones.ktutil.getMaxLimitWordsNum();a>b?baidu.show("textLineErrorSpan"):baidu.hide("textLineErrorSpan")},setSelectAllWordsBtnState:function(a){ui.get("tradePackageSummaryBtnDl").disable&&ui.get("tradePackageSummaryBtnDl").disable(a),ui.get("downloadWordTableBtn").disable&&ui.get("downloadWordTableBtn").disable(a)},setDownBtnState:function(a){a.length>0&&a.length<=triones.ktutil.getMaxLimitWordsNum()?ui.get("downloadKWBtn").removeState("disabled"):ui.get("downloadKWBtn").setState("disabled")},getClickTrElement:function(a){var b=ui.get("tradePackageTable").__getId("row")+a,c=baidu.g(b);return c},getNoHtml:function(){var a="对不起，没有合适的关键词推荐，请您输入关键词搜索。";return ui.get("krSearchInput").getValue()&&(a="对不起，没有合适的关键词推荐，请您尝试输入其他关键词。"),a},printAcceptLog:function(a){a=a||{};var b=triones.util.jsonToQuery(a);group.dao.printAcceptLog(b,function(a,b){b&&2==b.status&&ui.Dialog.alert({title:"提示",zIndex:1001,level:2,content:b.statusInfo.global})})}},define("addkeyword/wordline",function(){var a={init:function(){Eventer.removeEventListener(null,null,this),Eventer.addEventListener("ON_ADD_WORD",a.onAddWord,this),Eventer.addEventListener("ON_REMOVE_WORD",a.onRemoveWord,this),Eventer.addEventListener("BATCH_ADD_WORD",a.onBatchAddWord,this),Eventer.addEventListener("IMPORT_KR_SUCCESS",this.onImportKwSuccess,this)},onAddWord:function(b,c,d){var e=c.word||c.kw;if(a.addWords([e]),d){var f={tagId:d.tagId,specialTagSid:d.specialTagSid,normalTagSid:d.normalTagSid,sid:d.sid,wordids:c.wordid};triones.ktutil.printAcceptLog(f)}Eventer.dispatchEvent("ON_WORD_ADDED",b,c)},addWords:function(a){for(var b,c=0,d=window.recycledatasource.length;c<a.length;c++)for(b=0;d>b;b++)if(a[c]==window.recycledatasource[b].kw){a.splice(c,1),c--;break}for(var e,f=ui.get("textLine").getValueItems(),g=[],h=0;h<a.length;h++){var i=!1;e=a[h];for(var j=0;j<f.length;j++)if(f[j]==e){i=!0;break}i||g.push(e)}var k=f.concat(g);ui.get("textLine").setValue(""),ui.get("textLine").addLines(k),Eventer.dispatchEvent("ON_ADD_WORD_ALL",k),triones.ktutil.setDownBtnState(k),triones.ktutil.showKrWordsOverMax(k.length),triones.ktutil.setKrWordsNum(k.length)},onImportKwSuccess:function(a){this.addWords(a)},onBatchAddWord:function(b){for(var c=[],d=0;d<b.length;d++){var e=b[d].word||b[d].kw;c.push(e)}a.addWords(c),triones.ktutil.setDownBtnState(c)},onRemoveWord:function(b,c){for(var d=ui.get("textLine").getValueItems(),e=0;e<d.length;e++)if(d[e]==c.word){d.splice(e,1);break}ui.get("textLine").setValue(""),a.addWords(d),Eventer.dispatchEvent("ON_WORD_REMOVED",b,c)},errorHTML:'行关键词不合法，请您修改后再提交。<a href="http://yingxiao.baidu.com/support/wm/detail_5801.html?castk=LTE%3D" target="_blank">了解详情</a>',showError:function(a){baidu.g("krHintDiv").innerHTML=a,baidu.show("krHintDiv")},valid:function(){var b=ui.get("textLine").getValueItems(),c=ui.get("textLine").getOrigValueItems(),d=triones.ktutil.isValidKW(b,c);return 1!=d.ok?(-1==d.ok?triones.util.alert(d.msg):a.showError(d.msg),!1):!0}};return a}),define("addkeyword/wordtable",function(){window.AddKeyWordTableAction=new er.Action({VIEW:"addkeywordtable",order:"",orderBy:"",datasource:[],UI_PROP_MAP:{wordtable:{fields:"*tableFields",noDataHtml:triones.util.noTableData("数据加载中..."),datasource:[],sortable:1}},CONTEXT_INITER_MAP:{init:function(a){var b=this.arg.fields||triones.util.getFields(["word","hot2","pv2","competition2"],FIELDS_KT);this.setContext("tableFields",b),this.setContext("noDataHtml",this.arg.noDataHtml||triones.util.noTableData("对不起，没有合适的关键词推荐，请您输入关键词搜索。")),a()}},onafterrender:function(){this.addGlobalEvent(),this.addTableEvent()},getItemWord:function(a){return a.word||a.kw},addGlobalEvent:function(){Eventer.addEventListener("LIST_LOADED",this.onListLoaded,this),Eventer.addEventListener("ON_WORD_ADDED",this.onWordAdded,this),Eventer.addEventListener("ON_WORD_REMOVED",this.onWordRemoved,this),Eventer.addEventListener("ON_WORD_RECYCLED",this.onWordRemoved,this),Eventer.addEventListener("BATCH_ADD_WORD",this.onBatchAddWord,this),Eventer.addEventListener("TEXT_LINE_CHANGED",this.onTextLineChange,this)},onTextLineChange:function(a){for(var b=!1,c=0;c<this.datasource.length;c++){for(var d=this.datasource[c],e=!1,f=0;f<a.length;f++)a[f]==this.getItemWord(d)&&(this.onWordAdded(c,d),e=!0);e||(this.onWordRemoved(c,d),b=!0)}b&&triones.ktutil.setSelectAllWordsBtnState(0)},onBatchAddWord:function(){for(var a=0;a<this.datasource.length;a++)this.datasource[a].selected=1,this.toggleRowStyle(1,a,"selected");triones.ktutil.setSelectAllWordsBtnState(1)},onWordRemoved:function(a,b){b.selected=0,this.toggleRowStyle(b.selected,a,"selected")},onWordAdded:function(a,b){b.selected=1,this.toggleRowStyle(b.selected,a,"selected")},addTableEvent:function(){var a=ui.get("wordtable"),b=this;a.onrowover=b._onWordTableRowOver(),a.onsort=b._onWordTableSort(),a.onrowclick=b._onWordTableRowClick()},setButtonState:function(){var a=ui.get("downloadWordTableBtn"),b=ui.get("tradePackageSummaryBtnDl");this.datasource.length?(a.removeState&&a.removeState("disabled"),b.disable&&b.disable(0)):(a.setState&&a.setState("disabled"),b.disable&&b.disable(1))},onListLoaded:function(a,b,c){b&&(this.order=b,this.orderBy=c),this.datasource=a,this.setButtonState(),this.refreshTable()},refreshTable:function(){var a=ui.get("wordtable"),b=this,c=ui.get("ktIncludeInput"),d=ui.get("ktExcludeInput"),e=b.getContext("noDataHtml");(c.getValue&&""!==c.getValue()||d.getValue&&""!==d.getValue())&&(e=triones.util.noTableData("对不起，没有符合的结果，您可以尝试更换筛选条件。")),a.reRender({datasource:b.datasource,order:b.order,orderBy:b.orderBy,noDataHtml:e}),baidu.each(b.datasource,function(a,c){baidu.each(window.havedWords,function(d){a.word==d&&(b.toggleRowStyle(!0,c,"selected"),b.datasource[c].selected=1)})})},onAddSeccess:function(a){this.toggleRowStyle(item.selected,a,"selected")},onReCycleSeccess:function(a){this.toggleRowStyle(item.selected,a,"selected")},_onWordTableSort:function(){var a=this;return function(b,c){a.setContext("order",c),a.setContext("orderBy",b.field),Eventer.dispatchEvent("ON_TABLE_SORT",c,b.field)}},_doBatchAddWords:function(){for(i=0,len=kwArr.length;len>i;i++)kw=kwArr[i],curIndex=curhash[kw],curItem=curds[curIndex],curItem.recycled||(curItem.selected=1),idx=me._getWordIndex(kw),-1!=idx&&me.toggleRowStyle(1,idx,"selected")},toggleRowStyle:function(a,b,c){var d,e=a?"addClass":"removeClass",f="wordWrap"+b;switch(baidu.g(f)||(f="kwCusWrap_"+b),c){case"selected":d="kw-cus-clicked";break;case"recycled":d="kw-cus-recycled"}baidu.g(f)&&baidu[e](f,d)},_onWordTableRowClick:function(){var a=this;return function(b,c){var d=new baidu.event.EventArg(c),e=this.datasource[b];e.recycled||("recycle-bin"==d.target.className?a._doRecycleWord(b,e):a._doClickWord(b,e))}},_onWordTableRowOver:function(){return function(a){var b=this._getRow(a),c=this.datasource[a];c.recycled?b.title="该词已被移除，可在回收站进行还原":c.selected||(b.title="点击添加")}},onleave:function(){Eventer.removeEventListener(null,null,this)},_doClickWord:function(a,b){b.selected||Eventer.dispatchEvent("ON_ADD_WORD",a,b,this.arg.queryMap)},_doRecycleWord:function(a,b){var c=this,d={word:b.kw||b.word,seedWord:""};group.dao.reqAddRecycleWord(baidu.url.jsonToQuery(d),function(d,e){triones.util.isError(e)||(b.recycled=1,c.toggleRowStyle(!0,a,"recycled"),Eventer.dispatchEvent("ON_ADD_RECYCLE_WORD"))})}})});
//# sourceMappingURL=../sourcemap.map